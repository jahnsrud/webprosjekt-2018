!function($,e,t){"use strict";$(document).ready(function(){$(".typolab-fonts-list .font-preview-iframe").each(function(e,t){var n=$(t);n.find("iframe").on("load",function(){var e=$(this.contentWindow.document),t=e.find(".single-entry"),a=t.outerHeight();n.css({lineHeight:a+"px",height:a}),t.find("p").width(n.width()),n.addClass("loaded")})}),$(".fonts-list-select").each(function(e,t){var a=$(t),o=a.find(".alphabet a"),i=a.find(".search-bar input"),s=a.find(".search-bar select"),r=a.find(".font-list"),l=a.find(".font-list-data"),c=$('<div class="no-records">Nothing found!</div>'),u='<span class="checked"><i class="fa fa-check"></i></span>',v=a.data("font-source"),m=o.filter(".current").data("letter"),h=a.data("currentFont"),g=a.data("currentFontVariants"),y=a.data("currentFontSubsets"),b=function(e){o.removeClass("current"),o.filter('[data-letter="'+e+'"]').addClass("current"),i.val("");var t=!(!s.length||!s.val().length);_.removeClass("search-match search-unmatch letter-unmatch").filter(".active").removeClass("active"),_.filter(function(n,a){var o=$(a);return e==$(a).data("letter")?o.addClass("active"):t&&o.addClass("letter-unmatch"),a}),r.scrollTop(0),m=e},w=function(e){o.addClass("letter-unmatch").each(function(t,n){e[n.textContent]&&$(n).removeClass("letter-unmatch").addClass("letter-match")})},k=function(e,t){var a=$('<a href="#"></a>');if("google-fonts"==v){var o=e.family,i=o.substring(0,1).toUpperCase();a.html(u+o).data({letter:i,category:e.category}).on("click",function(t,n,o){t.preventDefault(),r.find("a").removeClass("current"),a.addClass("current"),p(e,n,o)}),m==i&&a.addClass("active"),t&&setTimeout(function(){n=!1,a.trigger("click",[g,y])},1),a.appendTo(r)}else if("font-squirrel"==v){var o=e.family_name,i=o.substring(0,1).toUpperCase();a.html(u+o).data({letter:i,category:e.classification}).on("click",function(t,n,o){t.preventDefault(),r.find("a").removeClass("current"),a.addClass("current"),d(e,n,o)}),m==i&&a.addClass("active"),t&&setTimeout(function(){n=!1,a.trigger("click",[g,y])},1),a.appendTo(r)}else if("premium-fonts"==v){var o=e.family,i=o.substring(0,1).toUpperCase();a.html(u+o).data({letter:i,category:e.category}).on("click",function(t,n,o){t.preventDefault(),r.find("a").removeClass("current"),a.addClass("current"),f(e,n,o)}),m==i&&a.addClass("active"),t&&setTimeout(function(){n=!1,a.trigger("click",[g,y])},1),a.appendTo(r)}},C=JSON.parse(l.html());$.each(C,function(e,t){var n=t.family?t.family:t.family_name;k(t,h==n)}),a.find(".loading-fonts").remove(),o.on("click",function(e){e.preventDefault(),b($(this).data("letter"))}),r.append(c);var _=r.find("a");i.on("keyup",function(e){var t=$(this).val(),n=0;if(0==t.length)return _.removeClass("search-match search-unmatch"),void c.removeClass("active");_.each(function(e,a){var o=$(a),i=o.text();i.match(new RegExp("^"+te(t),"i"))||i.match(new RegExp(" "+te(t),"i"))||i.match(new RegExp(te(t)+"$","i"))?(o.addClass("search-match").removeClass("search-unmatch"),n++):o.removeClass("search-match").addClass("search-unmatch")}),c[n>0?"removeClass":"addClass"]("active")}).on("blur",function(){0==$(this).val().length&&_.removeClass("search-match search-unmatch")}),s.on("change",function(){var e=s.val();if(o.removeClass("letter-match letter-unmatch current"),_.removeClass("category-match category-unmatch letter-unmatch active"),e){var t={};_.filter(function(n,a){var o=$(a);if(e==o.data("category")){var i=o.text().substring(0,1).toUpperCase();t[i]?t[i].count++:t[i]={letter:i,count:1},o.addClass("category-match")}else o.addClass("category-unmatch")}),w(t)}else m&&b(m)})}),$("#typolab-wrapper .tooltip").each(function(e,t){$(t).tooltipster({theme:"tooltipster-borderless"})}),$("body").on("keydown",".font-downloader #request-filesystem-credentials-form input",function(e){if(13==e.keyCode)return $(".font-downloader .hover .button-primary").click(),!1});var t="",n=!0,a=0,o=$(".font-preview-container"),i=$('#edit-font-form input[name="font_family"]'),s=$('#edit-font-form textarea[name="font_data"]'),r=function(e,t,n,a){var i=$('<div class="font-preview-row"></div>'),s=$('<div class="font-preview-row-bg"></div>');o.append(i.clone().attr("id",e).addClass(a||"").append('<span class="row-title">'+t+"</span>").append(n).wrapInner(s))},l=function(e){switch(e){case"display":return"Display";break;case"handwriting":return"Handwriting";break;case"monospace":return"Monospace";break;case"sans-serif":return"Sans Serif";break;case"serif":return"Serif";break}return e},c=function(e){switch(e){case"latin":return"Latin";break;case"latin-ext":return"Latin Extended";break;case"cyrillic":return"Cyrillic";break;case"greek":return"Greek";break;case"vietnamese":return"Vietnamese";break;case"cyrillic-ext":return"Cyrillic Extended";break;case"greek-ext":return"Greek Extended";break}return e},p=function(p,d,f){if(t==p.family)return!1;t=p.family,e.clearInterval(a),o.html(""),r("font-family-name","Font Family:",'<p class="font-family-name">'+p.family+"</p>");var u=$("<iframe></iframe>"),v=$('<p class="description">Loading font preview...</p>'),m=ajaxurl+"?action=typolab-preview-google-fonts&font-family="+encodeURIComponent(p.family);return u.attr({src:m}).on("load",function(){var e=$(this.contentWindow.document);v.remove(),u.height(e.height()),a=setInterval(function(){u.height(e.height())},50),n&&$("html, body").animate({scrollTop:o.offset().top-50}),n=!0,u.after('<p class="font-details-link"><a href="https://fonts.google.com/specimen/'+encodeURIComponent(p.family)+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+l(p.category)+"</p>"),i.val(p.family),s.val(JSON.stringify(p));var t=$('<div class="checkboxes-container"></div>'),m=d?d.split(","):["regular"];for(var h in p.variants){var g=p.variants[h],b=$("<label></label>"),w=$('<input type="checkbox" name="font_variants[]" value="'+g+'" '+(-1!=$.inArray(g,m)?"checked":"")+">");w.on("change",y),b.append(w),b.append("<span>"+(g.indexOf("italic")>0?g.replace("italic",", italic"):g)+"</span>").appendTo(t)}r("font-preview-variants","Font Variants",t,"half");var k=$('<div class="checkboxes-container"></div>'),C=f?f.split(","):["latin"];for(var h in p.subsets){var _=p.subsets[h],x=$("<label></label>");x.append('<input type="checkbox" name="font_subsets[]" value="'+_+'" '+(-1!=$.inArray(_,C)?"checked":"")+">"),x.append("<span>"+c(_)+"</span>").appendTo(k)}r("font-preview-subsets","Font Subsets",k,"half");var S=Math.max(t.outerHeight(),k.outerHeight());t.add(k).css({minHeight:S}),$(".fonts-list-select .font-list").css({maxHeight:Math.max($(".font-preview-container").outerHeight()-95,450)}),y()}),r("font-preview-iframe","Live Preview",[v,u]),!0},d=function(l,c,p){var d=JSON.parse($(".font-squirrel-data").html()),f=d.downloadedFonts[l.family_urlname];return t!=l.family_name&&(t=l.family_name,e.clearInterval(a),o.html(""),r("font-family-name","Font Family:",'<p class="font-family-name">'+l.family_name+"</p>"),i.val(l.family_name),$.getJSON("https://www.fontsquirrel.com/api/familyinfo/"+l.family_urlname,function(e){var t=$('<div class="checkboxes-container"></div>'),i=c?c.split(","):[],p=["Regular"];if($.each(e,function(e,n){var a=n.style_name,o=$('<input type="checkbox" name="font_variants[]" value="'+n.fontface_name+'" '+(-1!=$.inArray(n.fontface_name,i)?"checked":"")+">"),s=$("<label></label>");i.length||-1==$.inArray(n.style_name,p)||o.prop("checked",!0),o.on("change",y),s.append(o),s.append('<span title="'+n.fontface_name+'">'+n.style_name+"</span>").appendTo(t)}),s.val(JSON.stringify(e)),f){var d=$("<iframe></iframe>"),v=$('<p class="description">Loading font preview...</p>'),b=ajaxurl+"?action=typolab-preview-font-squirrel&font-family="+encodeURIComponent(l.family_urlname);return d.attr({src:b}).on("load",function(){var e=$(this.contentWindow.document);v.remove(),d.height(e.height()),a=setInterval(function(){d.height(e.height())},100),n&&$("html, body").animate({scrollTop:o.offset().top-50}),n=!0;var i=$('<a href="#" class="font-redownload" title="Re-download font"><i class="fa fa-refresh"></i></a>');d.after('<p class="font-details-link"><a href="https://www.fontsquirrel.com/fonts/'+encodeURIComponent(l.family_urlname)+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+l.classification+"</p>"),d.next().append(i),i.on("click",function(e){if(e.preventDefault(),i.hasClass("is-downloaded"))return!1;confirm("Confirm font re-download?")&&(i.addClass("fa-spin").attr("title","Downloading font..."),m("font-squirrel",l.family_urlname,function(e){if(i.removeClass("fa-spin"),e.errors){var t="";for(var n in e.error_msg)t+="\n"+e.error_msg[n];alert(t.trim())}else i.addClass("is-downloaded").html('<i class="fa fa-check"></i>').attr("title","Font has been downloaded successfully!")}))}),r("font-preview-variants","Font Variants",t),y()}),r("font-preview-iframe","Live Preview",[v,d]),T(),!0}var w=$('<div class="external-font-previews"></div>'),k=$('<p class="description">Loading font preview...</p>');r("font-preview-iframe","Preview",[k,w]),n&&$("html, body").animate({scrollTop:o.offset().top-50}),n=!0;var C=u(e);k.remove(),w.append(C),w.after('<p class="font-details-link"><a href="https://www.fontsquirrel.com/fonts/'+encodeURIComponent(l.family_urlname)+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+l.classification+"</p>"),r("font-preview-variants","Font Variants",t),y();var _="<p>You need to download and install this font in order to use it in this site.<br>";_+="Installation process is automatic, simply click the button below:</p>";var x=$('<a href="#install-font-package" class="button-primary download-font">Download &amp; Install Font</a>');r("font-squirrel-downloader","Install Font",[_,$('<p class="hover">').append(x)],"font-downloader"),x.on("click",function(e){if(e.preventDefault(),x.hasClass("disabled"))return!1;if(h()){var t=g();if(!t.hostname||!t.password||!t.username)return alert("Please enter connection credentials to proceed!"),!1}x.addClass("disabled").html("Installing font..."),m("font-squirrel",l.family_urlname,function(e){var t=$("#font-squirrel-downloader .font-preview-row-bg");if(x.removeClass("disabled").html("Download &amp; Install Font"),t.find(".notice-error").remove(),e.errors){t.append('<div class="notice notice-error"></div>');for(var n in e.error_msg)t.find(".notice-error").append("<p>"+e.error_msg[n]+"</p>")}else t.find("p, .download-font").remove(),h()&&$("#request-filesystem-credentials-form").parent().remove(),t.append('<p class="font-installed"><i class="fa fa-check"></i> Font has been installed successfully. Review font settings and click <strong>Save Changes</strong> button.</p>')})}),I("Font is not installed")}),!0)},f=function(e,l,c){var p=JSON.parse($(".premium-font-data").html()),d=p.downloadedFonts[e.family_urlname];if(t==e.family)return!1;var f=$('<div class="checkboxes-container"></div>'),u=l?l.split(","):[],b=["FunctionProBold","FunctionProBook","FunctionProDemi","FunctionProExtraBold","FunctionProLight","FunctionProMedium"];$.each(e.variants,function(e,t){var n=$('<input type="checkbox" name="font_variants[]" value="'+e+'" '+(-1!=$.inArray(e,u)?"checked":"")+">"),a=$("<label></label>");u.length||-1==$.inArray(t.name,b)||n.prop("checked",!0),n.on("change",y),a.append(n),a.append('<span title="'+e+'">'+t.name+"</span>").appendTo(f)});var w=$('<div class="checkboxes-container"></div>'),k=c?c.split(","):["macroman"];if($.each(e.subsets,function(e,t){var n=$("<label></label>");n.append('<input type="checkbox" name="font_subsets[]" value="'+e+'" '+(-1!=$.inArray(e,k)?"checked":"")+">"),n.append("<span>"+t+"</span>").appendTo(w)}),o.html(""),i.val(e.family),s.val(JSON.stringify(e)),r("font-family-name","Font Family:",'<p class="font-family-name">'+e.family+"</p>"),d){var C=$("<iframe></iframe>"),_=$('<p class="description">Loading font preview...</p>'),x=ajaxurl+"?action=typolab-preview-premium-fonts&font-family="+encodeURIComponent(e.family_urlname);return C.attr({src:x}).on("load",function(){var t=$(this.contentWindow.document);_.remove(),C.height(t.height()),a=setInterval(function(){C.height(t.height())},100),n&&$("html, body").animate({scrollTop:o.offset().top-50}),n=!0;var i=$('<a href="#" class="font-redownload" title="Re-download font"><i class="fa fa-refresh"></i></a>');C.after('<p class="font-details-link"><a href="'+e.creator+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+e.category+(d?"":' <span class="sep"></span> Size: '+e.size)+"</p>"),p.isActivated&&p.licenseKey&&(C.next().append(i),i.on("click",function(t){if(t.preventDefault(),i.hasClass("is-downloaded"))return!1;confirm("Confirm font re-download?")&&(i.addClass("fa-spin").attr("title","Downloading font..."),m("premium-fonts",e.family,function(e){if(i.removeClass("fa-spin"),e.errors){var t="";for(var n in e.error_msg)t+="\n"+e.error_msg[n];alert(t.trim())}else i.addClass("is-downloaded").html('<i class="fa fa-check"></i>').attr("title","Font has been downloaded successfully!")}))})),r("font-preview-variants","Font Variants",f,"two-thirds"),r("font-preview-subsets","Font Subsets",w,"one-third"),y()}),r("font-preview-iframe","Live Preview",[_,C]),T(),!0}var S=$('<div class="external-font-previews"></div>'),F=$('<p class="description">Loading font preview...</p>');r("font-preview-iframe","Preview",[F,S]);var D=v(e.variants);F.remove(),S.append(D),S.after('<p class="font-details-link"><a href="'+e.creator+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+e.category+(d?"":' <span class="sep"></span> Size: '+e.size)+"</p>"),r("font-preview-variants","Font Variants",f,"two-thirds"),r("font-preview-subsets","Font Subsets",w,"one-third"),y();var z="<p>You need to download and install this font in order to use it in this site.<br>";z+="Installation process is automatic, simply click the button below:</p>";var q=$('<a href="#install-font-package" class="button-primary download-font">Download &amp; Install Font</a>'),j="",L=h()?typolab_request_system_credentials_form:"";p.isActivated&&p.licenseKey?q.on("click",function(t){if(t.preventDefault(),q.hasClass("disabled"))return!1;if(h()){var n=g();if(!n.hostname||!n.password||!n.username)return alert("Please enter connection credentials to proceed!"),!1}q.addClass("disabled").html("Installing font..."),m("premium-fonts",e.family,function(e){var t=$("#premium-font-downloader .font-preview-row-bg");if(q.removeClass("disabled").html("Download &amp; Install Font"),t.find(".notice-error").remove(),e.errors){t.append('<div class="notice notice-error"></div>');for(var n in e.error_msg)t.find(".notice-error").append("<p>"+e.error_msg[n]+"</p>")}else t.find("p, .download-font").remove(),h()&&$("#request-filesystem-credentials-form").parent().remove(),t.append('<p class="font-installed"><i class="fa fa-check"></i> Font has been installed successfully. Review font settings and click  <strong>Save Changes</strong> button.</p>')})}):(q.addClass("disabled").on("click",function(e){return!1}),j='<div class="notice notice-warning"><p>To download this font you must <a href="admin.php?page=kalium-product-registration">activate the theme</a>.</p></div>'),r("premium-font-downloader","Install Font",[z,L,$('<p class="hover">').append(q),j],"font-downloader"),I("Font is not installed")},u=function(e){var t=$("<div></div>");return $.each(e,function(e,n){var a=$('<div class="preview-entry"></div>');a.append('<img src="'+n.listing_image+'">'),a.append("<span>"+n.style_name+"</span>"),t.append(a)}),t.children()},v=function(e){var t=$("<div></div>");return $.each(e,function(e,n){var a=$('<div class="preview-entry"></div>');n.screenshot&&(a.append('<img src="https://api.laborator.co/assets/img/font-previews/'+n.screenshot+'">'),a.append("<span>"+n.name+"</span>"),t.append(a))}),t.children()},m=function(e,t,n){var a,o=$(".fonts-list-select .font-list");switch(o.addClass("download-in-progress"),e){case"font-squirrel":a="typolab_font_squirrel_download";break;case"premium-fonts":a="typolab_premium_fonts_download";break}if(!a)return!1;var i={action:a,font_family:t};return $.post(ajaxurl,$.extend(i,g()),function(e){o.removeClass("download-in-progress"),"function"==typeof n&&n.apply(this,[e]),T()},"json"),!0},h=function(){return!1;return"string"==typeof typolab_request_system_credentials_form},g=function(){var e={};if($("#request-filesystem-credentials-form").length){$("#request-filesystem-credentials-form").find('input[type="text"], input[type="password"], input[type="hidden"], input:checked, input[type="submit"]').each(function(t,n){e[$(n).attr("name")]=$(n).val()})}return e},y=function(){var e=$('#font-preview-variants input[type="checkbox"]:checked'),t=$(".font-selectors-list .font-variants select"),n=$(".custom-font-form-layout");if(n.length){var a=[];n.find('#font-family-names input[name="font_variants[]"]').each(function(t,n){var o=$(n).val();o=o.replace(/(font-family:|\'|\")/gi,"").trim(),$.each(o.split(";"),function(e,t){t=t.split(",")[0],t.trim().length&&a.push($("<input>").attr({value:t.split(",")[0]}))}),e=$(a)})}t.each(function(t,n){var a=$(n),o=a.data("selected"),i=e.length>0;a.find("option").remove(),a.prop("disabled",0==i)[i?"removeClass":"addClass"]("disabled"),i||a.append("<option>- No font variants -</option>"),e.each(function(e,t){var n=$(t),i=n.val(),s=$("<option>"+i+"</option>").val(i);a.append(s),i==o&&s.prop("selected",!0)})});var o=$("#font-preview-variants"),i=$("#font-preview-subsets");if(o.length&&i.length){o.add(i).find(".font-preview-row-bg").css("min-height","").css("min-height",Math.max(o.outerHeight(),i.outerHeight()))}},b=function(){var e=$(".custom-font-form-layout"),t=e.find("#font_url").val(),i=[];if(e.find('#font-family-names input[name="font_variants[]"]').each(function(e,t){var n=$(t).val().split(";");for(var a in n)i.push(n[a])}),!t||0==i.join("").trim().length||e.data("last-value")==t+i.join(";"))return!1;e.data("last-value",t+i.join(";")),o.html("");var s=$("<iframe></iframe>"),l=$('<p class="description">Loading font preview...</p>'),c=ajaxurl+"?action=typolab-preview-custom-font&font-url="+encodeURIComponent(t)+"&font-family="+encodeURIComponent(i.join(";"));return s.attr({src:c}).on("load",function(){var e=$(this.contentWindow.document);l.remove(),s.height(e.height()),a=setInterval(function(){s.height(e.height())},50),n&&$("html, body").animate({scrollTop:o.offset().top-50}),n=!0,y()}),r("font-preview-iframe","Live Preview",[l,s]),!0},w=function(){var e=$(".typekit-font-form-layout"),t=e.find("#kit_id").val();if(!t||e.data("kit-id")==t)return!1;e.data("kit-id",t),o.html("");var i=$("<iframe></iframe>"),s=$('<p class="description">Loading font preview...</p>'),l=ajaxurl+"?action=typolab-preview-typekit-font&kit-id="+encodeURIComponent(t);return i.attr({src:l}).on("load",function(){var e=$(this.contentWindow.document);if(s.remove(),i.height(e.height()),a=setInterval(function(){i.height(e.height())},50),n&&$("html, body").animate({scrollTop:o.offset().top-50}),n=!0,"undefined"!=this.contentWindow.kitInfo.kit){var r=this.contentWindow.kitInfo.kit,l=[];$.each(r.families,function(e,t){l.push('<a href="https://typekit.com/fonts/'+t.slug+'" title="Variations: '+t.variations.join(", ")+'" target="_blank">'+t.name+"</a>")}),i.after('<p class="font-details-link">Font Families: '+l.join(", ")+'<a href="https://typekit.com/kit_editor/kits/'+t+'" class="font-redownload" target="_blank" title="Kit Settings"><i class="fa fa-cog"></i></a></p>')}}),r("font-preview-iframe","Live Preview",[s,i]),!0};if(1==$("form#edit-font-form").length){var k=$(".font-selectors-list tbody"),C=k.find(".no-records").clone();k.sortable({helper:function(e,t){return t.children().each(function(){$(this).width($(this).width())}),t},handle:".sort-css-rule-row",axis:"y"});var _=$("#edit-font-form #save_font_changes");_.data("text",_.val());var x=$(".typekit-font-form-layout");x.length&&(x.on("blur","#kit_id",w),x.find("#typekit-font-generate-preview").on("click",function(e){e.preventDefault(),w()}),n=!1,w());var S=$(".custom-font-form-layout");if(S.length){var F=S.find(".font-family-entries"),D=$('<li><input type="text" name="font_variants[]" value="" required="required"><a href="#" class="remove"><i class="fa fa-remove"></i></a></li>');S.on("click","#add-custom-font-input",function(e){e.preventDefault(),F.append(D.clone()).find("li:last-child input").focus()}),F.on("click","a.remove",function(e){if(e.preventDefault(),$(this).prev().val().length>0&&!confirm("Are you sure you want to delete this font family name?"))return!1;$(this).parent().remove(),y()}),S.on("blur",'#font_url, #font-family-names input[name="font_variants[]"]',b).find("#custom-font-generate-preview").on("click",function(e){e.preventDefault(),b()}),n=!1,b()}var z=$("#typolab-toggle-advanced-options");z.on("click",function(e){e.preventDefault(),z.toggleClass("shown").html(z.hasClass("shown")?z.data("hide-options"):z.data("show-options"))}).html(z.hasClass("shown")?z.data("hide-options"):z.data("show-options"));var T=function(){_.removeClass("disabled").prop("disabled",!1).val(_.data("text"))},I=function(e){_.addClass("disabled").prop("disabled",!0),e&&_.val(e)},q=function(e){var t=k.find("tr"),n=t.length+1+(e||0);return t.filter("#css-selector-"+n).length?q(e?e+1:1):n},j=function(e,t){if("function"!=typeof e){var n=$("<tr></tr>"),a=$('<td class="font-drag"></td>'),o=$('<td class="font-selector"></td>'),i=$('<td class="font-variants"></td>'),s=$('<td class="font-sizes"></td>'),r=$('<td class="font-case"></td>'),l=$('<td class="font-selector-action"></td>');n.append(a).append(o).append(i).append(r).append(s).append(l),k.find(".no-records").remove();var c=q();n.attr("id","css-selector-"+c);var p=$("<input>").attr({type:"text",required:!0,placeholder:"CSS Selector Rule"+(1==c?" (i.e.: body, p, .myclass)":""),name:"font_selectors["+c+"][selector]",tabIndex:c,value:e&&e.selector?e.selector:""});p.appendTo(o);$('<a href="#" class="sort-css-rule-row"><i class="fa fa-bars"></i></a>').appendTo(a);var d=$("<select>").attr({name:"font_selectors["+c+"][variant]"});e&&e.variant&&d.data("selected",e.variant),d.append('<option value="" selected disabled>Loading...</option>').appendTo(i).on("change",function(e){$(this).data("selected",$(this).val())});var f=$("<select>").attr({className:"font-case",name:"font_selectors["+c+"][text-transform]",tabIndex:c,title:"Value for `fext-transform` property"}),u={"":"Default",uppercase:"Upper case",lowercase:"Lower case",capitalize:"Capitalize"};for(var v in u)$("<option>",{value:v}).text(u[v]).attr("selected",1==(e&&e["text-transform"]&&v==e["text-transform"])).appendTo(f);f.appendTo(r);var m=$("<input>").attr({type:"number",placeholder:"General",className:"font-size-general",step:"any",name:"font_selectors["+c+"][font-sizes][general]",tabIndex:c,value:e&&e.fontSizes&&e.fontSizes.general?e.fontSizes.general:""}),h=$("<input>").attr({type:"number",placeholder:"Desktop",className:"font-size-desktop",step:"any",name:"font_selectors["+c+"][font-sizes][desktop]",tabIndex:c,value:e&&e.fontSizes&&e.fontSizes.desktop?e.fontSizes.desktop:""}),g=$("<input>").attr({type:"number",placeholder:"Tablet",className:"font-size-tablet",step:"any",name:"font_selectors["+c+"][font-sizes][tablet]",tabIndex:c,value:e&&e.fontSizes&&e.fontSizes.tablet?e.fontSizes.tablet:""}),y=$("<input>").attr({type:"number",placeholder:"Mobile",className:"font-size-mobile",step:"any",name:"font_selectors["+c+"][font-sizes][mobile]",tabIndex:c,value:e&&e.fontSizes&&e.fontSizes.mobile?e.fontSizes.mobile:""});m.appendTo(s),h.appendTo(s),g.appendTo(s),y.appendTo(s);var b=$("<select>").attr({name:"font_selectors["+c+"][font-sizes][unit]"});b.append('<option value="px">px</option>'),b.append('<option value="em">em</option>'),b.append('<option value="rem">rem</option>'),b.append('<option value="%">%</option>'),e&&e.fontSizes&&e.fontSizes.unit&&b.find("option").each(function(t,n){e.fontSizes.unit==$(n).val()&&$(n).prop("selected",!0)}),b.appendTo(s);var w=$('<a href="#" class="remove-font-selector"><i class="fa fa-remove"></i></a>');w.on("click",function(e){e.preventDefault(),(0==p.val().trim().length||confirm("Confirm delete?"))&&(n.remove(),0==k.find("tr:not(.no-records)").length&&k.append(C))}),w.appendTo(l),k.append(n),t&&p.focus()}},L=$("script#font-selectors");if(L.length){var P=JSON.parse(L.html());for(var R in P)j(P[R])}var N=$(".predefined-css-selectors"),A=function(e){$(e.target).closest(N).length||N.removeClass("shown")};N.on("click",".button",function(t){t.preventDefault(),N.toggleClass("shown"),N.hasClass("shown")?$(e).on("click",A):$(e).off("click",A)}),N.on("click","ul li a",function(e){e.preventDefault();var t=$(this).data("selectors"),n=[];for(var a in t)n.push(t[a]);j({selector:n.join(", ")}),N.removeClass("shown"),y()}),y(),$("#add-new-selector").on("click",function(e){e.preventDefault(),j(null,!0),y()});var U=$(".font-conditional-loading tbody"),H=$("script#conditional-statements");if(H)var O=JSON.parse(H.html());var E=function(e){var t=$("<tr></tr>"),n=$("<td></td>").addClass("statement"),a=$("<td></td>").addClass("operator"),o=$("<td></td>").addClass("criteria"),i=$("<td></td>").addClass("actions");U.find(".no-statements").remove(),U.append('<tr><td colspan="4" class="or-label"><span>OR</span></td></tr>');var s=$("<select></select>").attr("name","statements[]"),r=[];r.push({value:"post_type",text:"Post Type",group:"General"}),r.push({value:"page_type",text:"Page Type",group:"General"}),r.push({value:"page_template",text:"Page Template",group:"General"}),$.each(O.data.post_types,function(e,t){r.push({value:e,text:t.singular,group:"Post Types"})}),$.each(O.data.taxonomies,function(e,t){r.push({value:e,text:t.singular,group:"Taxonomy :: "+O.data.post_types[t.post_type].name})});var l={};$.each(r,function(t,n){var a=$('<option value="'+n.value+'">'+n.text+"</option>");n.group?(l[n.group]||(l[n.group]=$("<optgroup></optgroup>").attr("label",n.group),l[n.group].appendTo(s)),l[n.group].append(a)):a.appendTo(s),e&&e.statement==n.value&&a.attr("selected",!0)}),s.on("change",function(e){J(s.val(),p)}),n.append(s);var c=$("<select></select>").attr({name:"operators[]"});c.append('<option value="==">is</option>'),c.append('<option value="!=">is not</option>'),a.append(c),e&&c.find('option[value="'+e.operator+'"]').prop("selected",!0);var p=$("<select></select>").attr({name:"criterions[]",class:"is-loading"});p.append('<option value="" class="loading-options">Loading options...</option>'),o.append(p),p.on("valuesSet",function(t,n){e&&n==e.statement&&$(this).find("option").each(function(t,n){$(n).val()==e.criteria&&$(n).prop("selected",!0)})});var d=$('<a href="#" class="remove-conditional-statement"><i class="fa fa-remove"></i></a>');d.on("click",function(e){e.preventDefault(),confirm("Confirm delete?")&&(t.prev().remove(),t.remove(),0==U.find("tr").length&&U.append('<tr class="no-statements"><td colspan="4">No defined conditional statements. Font will be loaded in all pages.</td></tr>'))}),d.appendTo(i),U.append(t.append(n).append(a).append(o).append(i)),s.trigger("change")},J=function(e,t){return t.addClass("is-loading").find("option").remove(),t.append('<option value="">Loading data...</option>'),"post_type"==e?(t.removeClass("is-loading").find("option").remove(),$.each(O.data.post_types,function(e,n){t.append($('<option value="'+e+'">'+n.singular+"</option>"))}),t.trigger("valuesSet",e)):"page_type"==e?(t.removeClass("is-loading").find("option").remove(),$.each(O.data.page_types,function(e,n){t.append($('<option value="'+e+'">'+n.name+"</option>"))}),t.trigger("valuesSet",e)):"page_template"==e?(t.removeClass("is-loading").find("option").remove(),$.each(O.data.page_template,function(e,n){t.append($('<option value="'+e+'">'+n.name+"</option>"))}),t.trigger("valuesSet",e)):O.data[e]?(t.removeClass("is-loading").find("option").remove(),$.each(O.data[e],function(e,n){t.append('<option value="'+n.value+'">'+n.text+"</option>")}),0==O.data[e].length&&t.addClass("is-loading").append('<option value="">:: No Entries Found ::</option>'),t.trigger("valuesSet",e)):O.data.post_types[e]?O.data[e]||$.post(ajaxurl,{action:"typolab_get_post_type_entries",post_type:e},function(n){n.success&&(O.data[e]=n.entries,J(e,t))},"json"):O.data.taxonomies[e]&&(O.data[e]||$.post(ajaxurl,{action:"typolab_get_taxonomy_entries",taxonomy:e},function(n){n.success&&(O.data[e]=n.entries,J(e,t))},"json")),t};$("#add-new-conditional-statement").on("click",function(e){e.preventDefault(),E()}),$.each(O.statements,function(e,t){E(t)});var V=$('select[name="font_status"]');if(V.length){var W=function(){V.closest(".grouped-input")["published"==V.val()?"addClass":"removeClass"]("green")};V.on("change",W),W()}}$(".font-sizes-container").length&&($(".font-sizes-container .show-responsive-options").on("click",function(e){e.preventDefault(),$(this).closest(".font-size-group").toggleClass("responsive-options-shown")}),$(".font-sizes-container .font-size-group").each(function(e,t){var n=$(t);n.find("table tbody .hidden input").filter(function(e,t){return $(t).val().length>0}).length&&n.addClass("responsive-options-shown"),n.find("table tbody .hidden select").filter(function(e,t){return $(t).val().length>0}).length&&n.addClass("responsive-options-shown")}),$(".add-font-selectors-table").on("click",".add-entry",function(e){e.preventDefault();var t=$(this).closest("tr").clone(),n=$('<a class="remove" title="Delete Selector" href="#"><i class="fa fa-remove"></i></a>');t.find("input").val(""),t.find(".add-remove *").remove(),t.find(".add-remove").append(n),$(this).closest("tbody").append(t),n.on("click",function(e){e.preventDefault(),confirm("Confirm delete of CSS selector")&&t.remove()}),t.find("input:first").focus()}),$("#new-font-sizes-group").on("click",function(e){e.preventDefault(),$(".add-new-font-size-group-container").slideToggle("normal",function(){$(this).find("input, textarea").first().focus()})}),$(".delete-custom-font-sizes-group").on("click",function(e){confirm("Are you sure you want to delete this font size group?")||e.preventDefault()}));var G=$("#typolab-advanced-settings");if(G.length){$(".typolab-toggle-advanced-font-settings").on("click",function(e){e.preventDefault(),G.slideToggle(300)});var M=G.find(".font-export-options"),B=G.find(".font-export-loading"),K=G.find(".font-export-code"),Y=G.find("#typolab-export-settings");Y.on("click",function(e){e.preventDefault();var t=M.find("#typolab_export_font_faces").is(":checked")?1:0,n=M.find("#typolab_export_font_sizes").is(":checked")?1:0,a=M.find("#typolab_export_font_settings").is(":checked")?1:0;if(M.hasClass("is-loading")||M.hasClass("done")||!(t||n||a))return!1;M.addClass("is-loading").hide(),B.fadeIn(),$.post(ajaxurl,{action:"typolab-export-import-manager",doExport:!0,fontFaces:t,fontSizes:n,fontSettings:a},function(e){if(M.removeClass("is-loading"),B.hide(),e.exported){var t=K.find("textarea");t.val(e.exported),K.fadeIn(100,function(){t.select(),M.addClass("done"),Y.addClass("disabled")})}else alert("An error occured, export settings are not avaialble!")},"json")}),$("#typolab-import-button").on("click",function(e){$("#save_font_settings").click()})}$(".downloaded-fonts-list tbody .trash").on("click",function(e){if(!confirm("Are you sure you want to delete font files?\n\nThis won't delete fonts from the list, only font files."))return!1}),$(".typolab-fonts-list").on("click",".trash",function(e){if(!confirm("Are you sure you want to delete this font?"))return e.preventDefault(),!1});var Q=$(".typolab-select-font-source");if(Q.length){var X=Q.find("tbody tr"),Z=function(e){var t=$(".typolab-select-font-source").outerHeight();t-=$("#typolab_add_font").outerHeight(!0),$(".font-source-description").removeClass("selected").filter(".font-source-description-"+e).addClass("selected"),$(".typolab-selected-font-source").css({minHeight:t})};X.on("click",function(e){var t=$(this).find('input[type="radio"]'),n=t.val();X.removeClass("hover"),t.prop("checked",!0),$(this).addClass("hover"),Z(n)});var ee=X.find("input:checked")
;ee.closest("tr").addClass("hover"),Z(ee.val())}var te=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}})}(jQuery,window);